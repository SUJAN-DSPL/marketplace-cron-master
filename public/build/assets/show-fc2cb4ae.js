import{W as k,r as q,j as e}from"./app-0e1748b6.js";import{A as F}from"./AuthenticatedLayout-dcd4ae35.js";import{C as E,a as T,b as A,d as V,c as z,e as D}from"./card-43c69197.js";import{I as _,E as c}from"./error-1e611f39.js";import{L as t}from"./label-36de5c48.js";import{u as I,a as J,S as o,b as d,c as m,d as h,e as u,T as M}from"./use-toast-message-8eac2433.js";import{C as v}from"./checkbox-beecb964.js";import{S as w}from"./submit_button-c0de0316.js";import"./theme-toggler-b5671715.js";import"./index-9f942153.js";import"./useQuery-e1f3fb4f.js";const Q=({auth:b,scheduler:L})=>{var f;const{timezones:x,frequencies:p,cronJobs:j}=I(),[y]=J(),{data:r,setData:a,post:N,processing:n,errors:l,reset:S,recentlySuccessful:g}=k({name:"",description:"",is_active:!1,cron_job_class:"",frequencies:[{frequency_id:2,frequency_params:[]}],timezone:"Asia/Kolkata",notifiable_emails:[],notify_on_slack:!1}),C=s=>{s.preventDefault(),N(route("schedulers.store"))};return q.useEffect(()=>{if(g)return y({success:"Scheduler has been saved successfully"}),()=>{S()}},[g]),e.jsx(F,{user:b.user,header:e.jsx("p",{children:"/Scheduler/Update"}),children:e.jsxs(E,{children:[e.jsxs(T,{children:[e.jsx(A,{children:"Create Your Scheduler"}),e.jsx(V,{children:"Create a new Scheduler for a particular Job"})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs(z,{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"name",children:"Scheduler Name"}),e.jsx(_,{id:"name",placeholder:"Enter a unique Name Of the scheduler",onChange:s=>a("name",s.target.value)}),e.jsx(c,{position:"right",message:l.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"cron_job_class",children:"Select the Job"}),e.jsxs(o,{onValueChange:s=>a("cron_job_class",`App\\Jobs\\${s}`),children:[e.jsx(d,{id:"cron_job_class",className:"line-clamp-1  truncate",children:e.jsx(m,{placeholder:"Select level"})}),e.jsx(h,{children:j.data&&j.data.map((s,i)=>e.jsx(u,{value:s,children:s},i))})]}),e.jsx(c,{position:"right",message:l.cron_job_class})]})]}),e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"security-level",children:"Select Time zone"}),e.jsxs(o,{defaultValue:r.timezone,onValueChange:s=>a("timezone",s),children:[e.jsx(d,{id:"security-level",className:"line-clamp-1 truncate",children:e.jsx(m,{placeholder:"Select level"})}),e.jsx(h,{className:"h-[30vh]",children:x.data&&x.data.map((s,i)=>e.jsx(u,{value:s,children:s},i))})]}),e.jsx(c,{position:"right",message:l.timezone})]})}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"frequencies",children:"Frequency (next run time: 2.10AM)"}),e.jsxs(o,{defaultValue:`${(f=r.frequencies)==null?void 0:f[0].frequency_id}`,onValueChange:s=>a("frequencies",[{frequency_id:parseInt(s),frequency_params:[]}]),children:[e.jsx(d,{id:"frequencies",className:"line-clamp-1  truncate",children:e.jsx(m,{placeholder:"Select the  frequency"})}),e.jsx(h,{className:" h-[30vh]",children:p.data&&p.data.map((s,i)=>e.jsx(u,{value:`${s.id}`,children:s.label},i))})]}),e.jsx(c,{position:"right",message:l.frequencies})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"notifiable_emails",children:"Notifiable Emails"}),e.jsx(_,{id:"notifiable_emails",placeholder:"enter your all emails by , separator",onChange:s=>a("notifiable_emails",s.target.value.split(",").map(i=>i.trim()))}),e.jsx(c,{position:"right",message:l.notifiable_emails})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(M,{id:"description",placeholder:"Please include all information relevant to your issue.",onChange:s=>a("description",s.target.value)}),e.jsx(c,{position:"right",message:l.description})]})]}),e.jsxs(D,{className:"justify-between space-x-2",children:[e.jsxs("div",{className:" space-y-2",children:[e.jsx("div",{className:"block",children:e.jsxs("label",{htmlFor:"notify_on_slack",className:"flex items-center",children:[e.jsx(v,{id:"notify_on_slack",checked:r.notify_on_slack,disabled:n,onCheckedChange:s=>a("notify_on_slack",!r.notify_on_slack)}),e.jsx("span",{className:"ms-2 text-sm text-gray-600 dark:text-gray-400",children:"On Success Notify on Slack"})]})}),e.jsx("div",{className:"block",children:e.jsxs("label",{htmlFor:"is_active",className:"flex items-center",children:[e.jsx(v,{id:"is_active",checked:r.is_active,disabled:n,onCheckedChange:s=>a("is_active",!r.is_active)}),e.jsx("span",{className:"ms-2 text-sm text-gray-600 dark:text-gray-400",children:"Make it Active"})]})})]}),e.jsx(w,{isLoading:n,children:"Submit"})]})]})]})})};export{Q as default};
